"use strict";
var index_1 = require('../src/index');
var ava_1 = require('ava');
ava_1.default('Can call a smocked function', function (t) {
    var s = index_1.default()
        .add(function (_a) {
        var callIndex = _a.callIndex;
        return callIndex == 0;
    })
        .returns(42)
        .calls(3, "HELLO", [null, 'OK']);
    var f = s.get();
    var that = null;
    var msg = null;
    function next(err, myMsg) {
        that = this;
        msg = myMsg;
    }
    var r = f(1, 2, 3, next);
    t.is(that, 'HELLO');
    t.is(msg, 'OK');
    t.is(r, 42);
    t.deepEqual([{ checkIndex: 0, params: [1, 2, 3, next], called: 3, returned: 42 }], s.invocations);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi90ZXN0L2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxzQkFBcUIsY0FBYyxDQUFDLENBQUE7QUFFcEMsb0JBQWlCLEtBQUssQ0FBQyxDQUFBO0FBRXZCLGFBQUksQ0FBQyw2QkFBNkIsRUFBRSxVQUFTLENBQUM7SUFFMUMsSUFBSSxDQUFDLEdBQUcsZUFBUSxFQUFFO1NBQ2IsR0FBRyxDQUFDLFVBQUMsRUFBVztZQUFWLHdCQUFTO1FBQVEsTUFBTSxDQUFDLFNBQVMsSUFBSSxDQUFDLENBQUM7SUFBQyxDQUFDLENBQUM7U0FDaEQsT0FBTyxDQUFDLEVBQUUsQ0FBQztTQUNYLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUE7SUFFcEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ2hCLElBQUksSUFBSSxHQUFnQixJQUFJLENBQUM7SUFDN0IsSUFBSSxHQUFHLEdBQWdCLElBQUksQ0FBQztJQUU1QixjQUE0QixHQUFHLEVBQUUsS0FBSztRQUNsQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ1osR0FBRyxHQUFHLEtBQUssQ0FBQztJQUNoQixDQUFDO0lBRUQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBRXpCLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3BCLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2hCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ1osQ0FBQyxDQUFDLFNBQVMsQ0FDUCxDQUFDLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUMsQ0FBQyxFQUNwRSxDQUFDLENBQUMsV0FBVyxDQUNoQixDQUFDO0FBRU4sQ0FBQyxDQUFDLENBQUMifQ==