"use strict";
var index_1 = require('../src/index');
var ava_1 = require('ava');
ava_1.default('Can call a smocked function', function (t) {
    var s = index_1.default()
        .add(function (_a) {
        var callIndex = _a.callIndex;
        return callIndex < 2;
    })
        .returns(42)
        .calls(3, "HELLO", [null, 'OK'])
        .add(function (_a) {
        var callIndex = _a.callIndex;
        return true;
    })
        .returns(43)
        .calls(1, "GOOD MORNING", [null, 'WHO ARE YOU?']);
    var f = s.get();
    var that = [];
    var msg = [];
    var r = [];
    function next(err, myMsg) {
        that.push(this);
        msg.push(myMsg);
    }
    r = [f(1, 2, 3, next), f(4, 5, 6, next), f(7, next)];
    t.deepEqual(that, ['HELLO', 'HELLO', 'GOOD MORNING']);
    t.deepEqual(msg, ['OK', 'OK', "WHO ARE YOU?"]);
    t.deepEqual(r, [42, 42, 43]);
    t.deepEqual([
        { checkIndex: 0, params: [1, 2, 3, next], called: 3, returned: 42 },
        { checkIndex: 0, params: [4, 5, 6, next], called: 3, returned: 42 },
        { checkIndex: 1, params: [7, next], called: 1, returned: 43 }
    ], s.invocations);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi90ZXN0L2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxzQkFBcUIsY0FBYyxDQUFDLENBQUE7QUFFcEMsb0JBQWlCLEtBQUssQ0FBQyxDQUFBO0FBRXZCLGFBQUksQ0FBQyw2QkFBNkIsRUFBRSxVQUFTLENBQUM7SUFFMUMsSUFBSSxDQUFDLEdBQUcsZUFBUSxFQUFFO1NBQ2IsR0FBRyxDQUFDLFVBQUMsRUFBVztZQUFWLHdCQUFTO1FBQVEsTUFBTSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFBQyxDQUFDLENBQUM7U0FDL0MsT0FBTyxDQUFDLEVBQUUsQ0FBQztTQUNYLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQy9CLEdBQUcsQ0FBQyxVQUFDLEVBQVc7WUFBVix3QkFBUztRQUFRLE1BQU0sQ0FBQyxJQUFJLENBQUM7SUFBQyxDQUFDLENBQUM7U0FDdEMsT0FBTyxDQUFDLEVBQUUsQ0FBQztTQUNYLEtBQUssQ0FBQyxDQUFDLEVBQUUsY0FBYyxFQUFFLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7SUFFdEQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ2hCLElBQUksSUFBSSxHQUFhLEVBQUUsQ0FBQztJQUN4QixJQUFJLEdBQUcsR0FBYSxFQUFFLENBQUM7SUFDdkIsSUFBSSxDQUFDLEdBQWEsRUFBRSxDQUFDO0lBRXJCLGNBQTRCLEdBQUcsRUFBRSxLQUFLO1FBQ2xDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEIsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwQixDQUFDO0lBRUQsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFFckQsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7SUFDdEQsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7SUFDL0MsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFDLFNBQVMsQ0FDUDtRQUNJLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUM7UUFDbEUsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBQztRQUNsRSxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBQztLQUMvRCxFQUNELENBQUMsQ0FBQyxXQUFXLENBQ2hCLENBQUM7QUFFTixDQUFDLENBQUMsQ0FBQyJ9