"use strict";
var index_1 = require('../src/index');
var ava_1 = require('ava');
ava_1.default.cb('Can call a smocked function', function (t) {
    var s = index_1.default()
        .add(function (_a) {
        var callIndex = _a.callIndex;
        return callIndex < 2;
    })
        .returns(42)
        .calls(3, "HELLO", [null, 'OK'])
        .add(function (_a) {
        var callIndex = _a.callIndex;
        return true;
    })
        .returns(43)
        .calls(1, "GOOD MORNING", [null, 'WHO ARE YOU?']);
    var f = s.get();
    var that = [];
    var msg = [];
    var r = [];
    function next(err, myMsg) {
        that.push(this);
        msg.push(myMsg);
    }
    r = [f(1, 2, 3, next), f(4, 5, 6, next), f(7, next)];
    var interval = setInterval(function () {
        if (msg.length == 3) {
            t.deepEqual(that, ['HELLO', 'HELLO', 'GOOD MORNING']);
            t.deepEqual(msg, ['OK', 'OK', "WHO ARE YOU?"]);
            t.deepEqual(r, [42, 42, 43]);
            t.deepEqual([
                { checkIndex: 0, params: [1, 2, 3, next],
                    called: 3, returned: 42 },
                { checkIndex: 0, params: [4, 5, 6, next],
                    called: 3, returned: 42 },
                { checkIndex: 1, params: [7, next],
                    called: 1, returned: 43 }
            ], s.invocations);
            clearInterval(interval);
            t.end();
        }
    }, 10);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi90ZXN0L2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxzQkFBcUIsY0FBYyxDQUFDLENBQUE7QUFFcEMsb0JBQWlCLEtBQUssQ0FBQyxDQUFBO0FBRXZCLGFBQUksQ0FBQyxFQUFFLENBQUMsNkJBQTZCLEVBQUUsVUFBUyxDQUFDO0lBRTdDLElBQUksQ0FBQyxHQUFHLGVBQVEsRUFBRTtTQUNiLEdBQUcsQ0FBQyxVQUFDLEVBQVc7WUFBVix3QkFBUztRQUFRLE1BQU0sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDO0lBQUMsQ0FBQyxDQUFDO1NBQy9DLE9BQU8sQ0FBQyxFQUFFLENBQUM7U0FDWCxLQUFLLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztTQUMvQixHQUFHLENBQUMsVUFBQyxFQUFXO1lBQVYsd0JBQVM7UUFBUSxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQUMsQ0FBQyxDQUFDO1NBQ3RDLE9BQU8sQ0FBQyxFQUFFLENBQUM7U0FDWCxLQUFLLENBQUMsQ0FBQyxFQUFFLGNBQWMsRUFBRSxDQUFDLElBQUksRUFBRSxjQUFjLENBQUMsQ0FBQyxDQUFDO0lBRXRELElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNoQixJQUFJLElBQUksR0FBYSxFQUFFLENBQUM7SUFDeEIsSUFBSSxHQUFHLEdBQWEsRUFBRSxDQUFDO0lBQ3ZCLElBQUksQ0FBQyxHQUFhLEVBQUUsQ0FBQztJQUVyQixjQUE0QixHQUFHLEVBQUUsS0FBSztRQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEIsQ0FBQztJQUVELENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBR3JELElBQUksUUFBUSxHQUFHLFdBQVcsQ0FBQztRQUN2QixFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7WUFDdEQsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLGNBQWMsQ0FBQyxDQUFDLENBQUM7WUFDL0MsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDN0IsQ0FBQyxDQUFDLFNBQVMsQ0FDUDtnQkFDSSxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDO29CQUNwQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUU7Z0JBQzdCLEVBQUUsVUFBVSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUM7b0JBQ3BDLE1BQU0sRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRTtnQkFDN0IsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUM7b0JBQzlCLE1BQU0sRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRTthQUNoQyxFQUNELENBQUMsQ0FBQyxXQUFXLENBQ2hCLENBQUM7WUFDRixhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDeEIsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ1osQ0FBQztJQUNMLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUVYLENBQUMsQ0FBQyxDQUFDIn0=